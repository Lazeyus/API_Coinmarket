# CoinmarketCap API | Koshelek.ru test task

Для запуска тестов потребуется PyCharm IDE, с установленными модулями pytest и requests, установить которые можно вводом в терминал следующих команд:
```shell script
pip install pytest
pip install requests
```

### Запуск теста №1

В тесте проверяются три условия:
1) Ответ от сервера менее 500 мс;
2) Информация о тикерах актуальна, т.е. на сегодняшнюю дату;
3) Размер пакета от сервера не более 10 Кбайт.

Запросы передаются на https://pro-api.coinmarketcap.com/v1/cryptocurrency/listings/latest
Чтобы передать в заголовке свой API ключ, необходимо его поместить в значении параметра 'X-CMC_PRO_API_KEY' при отправке GET-запроса.
Получить свой ключ можно зарегистрировавшись на https://pro.coinmarketcap.com/signup/
Подробнее можно узнать на *https://coinmarketcap.com/api/documentation/v1/*
Запуск теста инициируется следующей командой в терминале:
```shell script
pytest my_test.py
```
В случае успешного прохождения в терминале появится сообщение типа 
```shell script
1 passed in 0.48s
```
В случае же, если какое-то из условий не пройдено, появится ошибка AssertionError с указанием конкретного FAILED теста.


### Запуск теста №1 асинхронно

Чтобы запустить тест №1 асинхронно 8 раз, необходимо запустить my_test_async.py. 
При этом проверяется 80-перцентиль времени ответа от сервера, который должен быть не более 450 мс,
а также скорость ответов от сервера в секунду, которая должна быть не менее 5.
В случае успешного прохождения в терминале появится сообщение типа 
```shell script
1 passed in 3.13s 
```
В случае же, если какое-то из условий не пройдено, появится ошибка AssertionError с указанием конкретного FAILED теста.

### Запуск автотестов

Автотесты предусматривают сценарий переключения языка дефолтной страницы https://coinmarketcap.com/ на любой из других
предлагаемых языков. Тест считается успешно пройденным, если при переключении языка сервер возвращает html-документ, в корневом элементе которого атрибут lang имеет значение соответствующее выбранному языку (ru для русского, de для немецого и т.д.). Все тесты запускаются в полноэкранном режиме.
Каждый из автотестов запускается посредством пакета webdriver для одного из следующих браузеров:
Firefox 
Chrome
Internet Explorer

Для запуска теста необходимо запустить lang_test.py-файл для соответствующего браузера (например, lang_test_chrome для Chrome). 
Запуск теста инициируется следующей командой в терминале:
```shell script
pytest lang_test_chrome.py
```

